# LCD 핀 연결 테스트 가이드

## 테스트 개요

이 테스트 코드는 HBE-Combo 2-DLD 보드의 LCD 핀 연결이 올바른지 확인하기 위한 것입니다.
4가지 단계별 테스트 패턴을 2초 간격으로 반복 표시합니다.

## 테스트 시퀀스

### 테스트 1: 16진수 패턴 (데이터 비트 테스트)
```
Line 1: "0123456789ABCDEF"
Line 2: "Data Bit Test  "
```

**목적**: 각 데이터 비트(D0~D7)가 올바르게 연결되었는지 확인

**확인 사항**:
- 숫자 0~9가 순서대로 표시되는가?
- 알파벳 A~F가 순서대로 표시되는가?
- 글자가 깨지거나 이상한 문자가 표시되는가?

**문제 진단**:
| 증상 | 원인 | 해결 |
|------|------|------|
| 모든 글자가 깨짐 | 데이터 버스 전체 문제 | lcd_data[7:0] 핀 전체 재확인 |
| 특정 글자만 이상함 | 특정 비트 연결 문제 | 아래 비트 매핑 테이블 참조 |
| 아무것도 안 보임 | RS, E, RW 신호 문제 | 제어 신호 핀 재확인 |

### 테스트 2: 알파벳 패턴 (문자 표시 테스트)
```
Line 1: "ABCDEFGHIJKLMNOP"
Line 2: "QRSTUVWXYZ      "
```

**목적**: 모든 알파벳 대문자가 올바르게 표시되는지 확인

**확인 사항**:
- A~Z까지 26개 알파벳이 순서대로 보이는가?
- 각 문자가 명확하게 구분되는가?
- Line 1과 Line 2가 올바른 위치에 표시되는가?

**문제 진단**:
| 증상 | 원인 | 해결 |
|------|------|------|
| Line 1과 Line 2가 바뀜 | RS 신호 오류 | lcd_rs 핀 확인 |
| 글자가 겹쳐 보임 | 타이밍 문제 | lcd_e 신호 확인 |
| 일부만 보임 | Enable 신호 문제 | XDC 파일 핀 할당 확인 |

### 테스트 3: 숫자 패턴 (타이밍 테스트)
```
Line 1: "0000 1111 2222  "
Line 2: "3333 4444 5555  "
```

**목적**: 동일 문자 반복 표시로 타이밍과 데이터 홀드 확인

**확인 사항**:
- 각 숫자가 4번씩 반복되는가?
- 공백이 올바른 위치에 있는가?
- 글자가 떨리거나 깜빡이지 않는가?

**문제 진단**:
| 증상 | 원인 | 해결 |
|------|------|------|
| 글자가 떨림 | Enable 펄스 불안정 | 클럭 분주 확인 |
| 일부 글자 누락 | Setup/Hold 시간 부족 | DELAY 값 증가 |
| 랜덤 문자 표시 | 노이즈/크로스토크 | 배선 품질 확인 |

### 테스트 4: 최종 확인 (성공 메시지)
```
Line 1: "LCD Pin Test OK!"
Line 2: "All Pins Good!! "
```

**목적**: 모든 테스트 통과 시 표시되는 최종 확인 메시지

**확인 사항**:
- 모든 글자가 명확하게 보이는가?
- 느낌표(!)가 올바르게 표시되는가?
- 이 화면이 정상적으로 보이면 핀 연결 성공!

## 데이터 비트 매핑 테이블

각 문자의 ASCII 값과 해당 비트 패턴:

| 문자 | ASCII | D7 | D6 | D5 | D4 | D3 | D2 | D1 | D0 |
|------|-------|----|----|----|----|----|----|----|----|
| '0'  | 0x30  | 0  | 0  | 1  | 1  | 0  | 0  | 0  | 0  |
| '1'  | 0x31  | 0  | 0  | 1  | 1  | 0  | 0  | 0  | 1  |
| '2'  | 0x32  | 0  | 0  | 1  | 1  | 0  | 0  | 1  | 0  |
| 'A'  | 0x41  | 0  | 1  | 0  | 0  | 0  | 0  | 0  | 1  |
| 'B'  | 0x42  | 0  | 1  | 0  | 0  | 0  | 0  | 1  | 0  |

### 비트별 문제 진단

**D0 비트 문제**: 홀수 문자(1, 3, 5, A, C...)가 짝수 문자(0, 2, 4, B, D...)로 보임
**D1 비트 문제**: 2, 3, 6, 7 등이 이상하게 보임
**D2 비트 문제**: 4~7 범위 숫자에 문제
**D3 비트 문제**: 8, 9, A~F 범위에 문제
**D4~D6 비트 문제**: 대문자/소문자/숫자 구분 문제
**D7 비트 문제**: 확장 문자셋 문제 (기본 ASCII는 영향 적음)

## XDC 핀 할당 확인

`lcd_test.xdc` 파일의 핀 할당을 확인하세요:

```tcl
# 제어 신호
lcd_rs   -> M4  (Register Select)
lcd_rw   -> M3  (Read/Write)
lcd_e    -> L3  (Enable)

# 데이터 버스
lcd_data[7] -> K3
lcd_data[6] -> J4
lcd_data[5] -> J3
lcd_data[4] -> H4
lcd_data[3] -> H3
lcd_data[2] -> H2
lcd_data[1] -> G3
lcd_data[2] -> G2
```

## 하드웨어 연결 체크리스트

### 전원 확인
- [ ] LCD 백라이트 전원 ON
- [ ] VDD/GND 연결 확인
- [ ] 대비 조절 포텐셔미터 조정 (시계방향/반시계방향)

### 신호 연결 확인
- [ ] RS 신호 연결
- [ ] RW 신호 연결 (GND로 고정 가능)
- [ ] E 신호 연결
- [ ] D0~D7 데이터 버스 연결 (8개 모두)

### 물리적 확인
- [ ] 커넥터가 단단히 삽입되었는가?
- [ ] 핀이 구부러지지 않았는가?
- [ ] 납땜 연결이 양호한가?
- [ ] 단락(Short)이나 개방(Open)이 없는가?

## 문제 해결 플로우차트

```
LCD에 아무것도 안 보임
  ├─ 백라이트 안 켜짐
  │   └─ 전원 연결 확인
  └─ 백라이트만 켜짐
      ├─ 대비 조절 (포텐셔미터)
      └─ 신호 연결 확인
          ├─ RS, RW, E 확인
          └─ D0~D7 확인

글자가 깨져 보임
  ├─ 특정 패턴으로 깨짐
  │   └─ 데이터 비트 매핑 테이블로 문제 비트 찾기
  └─ 랜덤하게 깨짐
      ├─ 타이밍 문제 (DELAY 값 증가)
      └─ 노이즈 문제 (배선 품질)

글자가 깜빡임
  └─ Enable 신호 문제
      ├─ 주파수 확인 (1MHz)
      └─ 펄스 폭 확인 (50μs)
```

## 성공 기준

다음 모든 조건이 만족되면 핀 연결이 올바른 것입니다:

✅ 테스트 1: "0123456789ABCDEF" 명확히 보임
✅ 테스트 2: A~Z 알파벳 순서대로 보임
✅ 테스트 3: 숫자 반복 패턴 정확히 보임
✅ 테스트 4: "LCD Pin Test OK!" 메시지 보임
✅ 각 테스트가 2초마다 자동 전환됨
✅ 글자가 깜빡이거나 떨리지 않음

## 추가 테스트

핀 연결이 확인되면 다음 단계로 진행하세요:

1. **Morse Translator 테스트**: 실제 프로젝트 코드 업로드
2. **Keypad 입력 테스트**: 키패드 입력과 LCD 출력 연동
3. **Buzzer 출력 테스트**: 모스부호 소리 출력
4. **통합 테스트**: 전체 시스템 동작 확인

## 문의 및 디버깅

문제가 해결되지 않으면:
1. Vivado ILA(Integrated Logic Analyzer)로 신호 파형 확인
2. 오실로스코프로 실제 하드웨어 신호 측정
3. 단계별로 테스트 (초기화 → 명령어 → 데이터)
