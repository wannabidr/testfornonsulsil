# LCD 핀 테스트 코드 - 요약

## 📋 개요

HBE-Combo 2-DLD 보드의 LCD 핀 연결을 자동으로 테스트하는 코드입니다.
4가지 테스트 패턴을 2초 간격으로 순환하며 핀 연결 상태를 진단합니다.

## 🔄 테스트 시퀀스

```
[초기화 20ms] → [테스트1 2초] → [테스트2 2초] → [테스트3 2초] → [테스트4 2초] → 반복
```

### 테스트 1: 16진수 패턴
```
0123456789ABCDEF
Data Bit Test   
```
- **검증 항목**: 데이터 버스 D0~D7 개별 비트 연결
- **진단 방법**: 숫자와 알파벳의 비트 패턴으로 오류 비트 식별

### 테스트 2: 알파벳 패턴
```
ABCDEFGHIJKLMNOP
QRSTUVWXYZ      
```
- **검증 항목**: 전체 문자 렌더링 및 Line 1/2 구분
- **진단 방법**: RS 신호 동작 확인, 문자 완성도 확인

### 테스트 3: 숫자 반복 패턴
```
0000 1111 2222  
3333 4444 5555  
```
- **검증 항목**: 데이터 홀드 시간 및 타이밍
- **진단 방법**: 반복 문자의 일관성 확인

### 테스트 4: 성공 메시지
```
LCD Pin Test OK!
All Pins Good!! 
```
- **검증 항목**: 최종 확인 및 특수 문자(!)
- **진단 방법**: 명확한 메시지 출력 여부

## 🎯 핀별 진단 가이드

### 제어 신호
| 신호 | 핀 | 증상 | 진단 |
|------|-----|------|------|
| lcd_rs | M4 | Line 1/2가 바뀜 | RS 연결 오류 |
| lcd_e | L3 | 아무것도 안 보임 | Enable 신호 없음 |
| lcd_rw | M3 | 화면 깜빡임 | R/W 설정 오류 |

### 데이터 버스
| 비트 | 핀 | 테스트 문자 | 증상 예시 |
|------|-----|------------|----------|
| D0 | G2 | 1, 3, 5, A, C | 홀수가 짝수로 보임 |
| D1 | G3 | 2, 3, 6, 7 | 특정 범위 오류 |
| D2 | H2 | 4~7 | 상위 숫자 문제 |
| D3 | H3 | 8~F | 알파벳 영역 문제 |
| D4 | H4 | 대소문자 구분 | 문자 유형 혼란 |
| D5 | J3 | 특수문자 | 기호 표시 오류 |
| D6 | J4 | 소문자 | 케이스 문제 |
| D7 | K3 | 확장 문자 | 일반적으로 영향 적음 |

## ✅ 성공 기준

다음 조건을 **모두** 만족해야 합니다:

- [ ] 테스트 1: "0123456789ABCDEF" 명확히 보임
- [ ] 테스트 2: "ABCDEFGHIJKLMNOP" + "QRSTUVWXYZ" 명확히 보임
- [ ] 테스트 3: "0000 1111 2222 3333 4444 5555" 패턴 정확
- [ ] 테스트 4: "LCD Pin Test OK!" 메시지 보임
- [ ] 2초마다 자동으로 다음 테스트로 전환
- [ ] 글자 깜빡임, 떨림, 깨짐 없음

## 🔧 문제 해결

### 아무것도 안 보임
1. LCD 백라이트 전원 확인
2. 대비 조절 (포텐셔미터를 천천히 돌려보기)
3. 리셋 버튼 다시 눌러보기
4. Enable 신호(lcd_e) 핀 확인

### 글자가 깨져 보임
1. `PIN_TEST_GUIDE.md`의 비트 매핑 테이블 참조
2. 깨진 문자의 패턴으로 오류 비트 식별
3. 해당 데이터 핀의 연결 재확인
4. XDC 파일의 핀 할당 확인

### 깜빡이거나 불안정
1. 전원 공급 확인 (5V, 충분한 전류)
2. GND 연결 확인
3. 클럭 주파수 확인 (100MHz)
4. 타이밍 상수 조정 (DELAY 값 증가)

## 📊 타이밍 구조

```
시스템 클럭: 100MHz (10ns)
     ↓ (100분주)
LCD 제어 클럭: 1MHz (1μs)
     ↓ (타이밍 제어)
테스트 타이머: 1Hz (1초)
     ↓ (2카운트)
테스트 전환: 0.5Hz (2초)
```

## 📁 관련 파일

- `lcd_controller.v`: LCD 제어 모듈 (1MHz, HD44780 호환)
- `lcd_test_top.v`: 핀 테스트 시퀀스 구현
- `lcd_test.xdc`: 핀 할당 제약 파일
- `PIN_TEST_GUIDE.md`: 상세 문제 해결 가이드
- `README.md`: 전체 프로젝트 설명
- `TIMING_SPEC.md`: 타이밍 상세 사양

## 🚀 다음 단계

핀 연결이 확인되면:
1. 모스부호 번역기 메인 코드로 교체
2. Keypad 입력 모듈 추가
3. Piezo Buzzer 출력 모듈 추가
4. 전체 시스템 통합 테스트

## 💡 팁

- **대비 조절**: LCD가 흐릿하면 포텐셔미터를 조금씩 돌려보세요
- **리셋 활용**: 문제 발생 시 리셋 버튼으로 재시작
- **순차 확인**: 테스트 1부터 4까지 순서대로 확인
- **패턴 기억**: 정상 패턴을 사진으로 찍어두면 비교에 유용

## ⚠️ 주의사항

- 전원 인가 상태에서 핀 연결/해제 금지
- FPGA 프로그래밍 중 리셋 버튼 누르지 말 것
- LCD에 물리적 충격 주지 말 것
- 정전기 방지 조치 권장
